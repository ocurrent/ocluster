(library
 (name winsvc_wrapper)
 (libraries
  (select winsvc_wrapper.ml from
   (winsvc -> winsvc_wrapper.winsvc.ml)
   (       -> winsvc_wrapper..ml)))
 (modules winsvc_wrapper))

(library
 (name version)
 (libraries dune-build-info)
 (modules version))

(executables
 (public_names ocluster-scheduler ocluster-client ocluster-admin)
 (package ocluster)
 (names scheduler client admin)
 (libraries dune-build-info ocluster-api logs.cli logs.fmt fmt.cli fmt.tty capnp-rpc-unix cluster_scheduler cluster_worker prometheus-app.unix db winsvc_wrapper version)
 (modules scheduler client admin logging options))

(executable
 (public_name ocluster-worker)
 (package ocluster-worker)
 (name worker)
 (libraries dune-build-info ocluster-api logs.cli logs.fmt fmt.cli fmt.tty capnp-rpc-unix ocluster-worker prometheus-app.unix db winsvc_wrapper version)
 (modules worker))
